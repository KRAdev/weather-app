(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{77:function(e,t,a){e.exports=a(90)},82:function(e,t,a){},83:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),i=a.n(c),l=(a(82),a(83),a(6)),s=a(125),o=a(127),m=a(129),u=a(130),p=a(131),d=a(60),h=a(143),f=a(12),E=a(25),y=a(15);localStorage.cityList||(localStorage.cityList=JSON.stringify([]));var b=Object(y.b)({key:"cityListAtom",default:JSON.parse(localStorage.cityList)}),g=Object(y.b)({key:"addCityError",default:null}),v=Object(y.c)({key:"cityListSelector",get:function(e){var t=(0,e.get)(b);return localStorage.cityList=JSON.stringify(t),t}}),x=Object(y.c)({key:"addCityState",set:function(e,t){var a=e.set;a(b,(function(e){return e.some((function(e){return e.id===t.id}))?(a(g,{text:"City already added"}),e):[].concat(Object(E.a)(e),[t])}))}}),w=Object(y.c)({key:"deleteCityState",set:function(e,t){(0,e.set)(b,(function(e){return[].concat(Object(E.a)(e.slice(0,t)),Object(E.a)(e.slice(t+1)))}))}}),N=Object(s.a)((function(e){return{root:{flexGrow:1},logoTitle:{flexGrow:1},toYourCitiesBtn:{marginRight:"25px"},addCityBtn:{marginRight:"25px"}}}));function j(e){var t=Object(f.g)(),a=N(),c=Object(y.e)(v),i=Object(n.useState)(null),s=Object(l.a)(i,2),E=s[0],b=s[1],g=Object(y.f)(w);return r.a.createElement("div",{className:a.root},r.a.createElement(o.a,{position:"static"},r.a.createElement(m.a,null,r.a.createElement(u.a,{variant:"h4",className:a.logoTitle},"Weather"),c.length?r.a.createElement(p.a,{className:a.toYourCitiesBtn,variant:"contained",color:"primary",onClick:function(){return t.push("/")}},"To your cities"):null,r.a.createElement(p.a,{className:a.addCityBtn,variant:"contained",color:"primary",onClick:function(){return t.push("/add")}},"Add City"),r.a.createElement(p.a,{className:a.deleteCityBtn,"aria-controls":"delete-city-menu","aria-haspopup":"true",variant:"contained",color:"primary",onClick:function(e){b(e.currentTarget)}},"Delete City"),r.a.createElement(d.a,{id:"delete-city-menu",anchorEl:E,keepMounted:!0,open:Boolean(E),onClose:function(){b(null)}},0===c.length?r.a.createElement(h.a,null,"Nothing to delete"):c.map((function(e,t){return r.a.createElement(h.a,{key:e.id,onClick:function(){return g(t)}},"\xd7 ",e.name)}))))))}var O=a(139),C=a(137),k=a(10),S=a.n(k),L=a(18),M=a(132),W=a(133),I=a(138),T=a(136),B=a(135),D=a(134),V="0a4ca624b3b6caa5a76be2d1c36ef77d";function z(e){return A.apply(this,arguments)}function A(){return(A=Object(L.a)(S.a.mark((function e(t){var a,n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&appid=").concat(V));case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,r={coord:{lat:n.coord.lat,lon:n.coord.lon},name:n.name,country:n.sys.country,id:n.id},e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function F(e){return J.apply(this,arguments)}function J(){return(J=Object(L.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.openweathermap.org/data/2.5/weather?id=".concat(t,"&appid=").concat(V,"&units=metric"));case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function G(e){return R.apply(this,arguments)}function R(){return(R=Object(L.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.openweathermap.org/data/2.5/forecast?id=".concat(t,"&cnt=8&appid=").concat(V,"&units=metric"));case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var Y=Object(s.a)({root:{maxWidth:345},media:{width:"auto"},weatherDescription:{textTransform:"capitalize"}});function _(e){var t=e.city,a=Y(),c=Object(f.g)(),i=Object(n.useState)(null),s=Object(l.a)(i,2),o=s[0],m=s[1];function d(e){return h.apply(this,arguments)}function h(){return(h=Object(L.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(t.id);case 2:a=e.sent,m(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){d(t)}),[]),r.a.createElement(M.a,{className:a.root},r.a.createElement(W.a,{onClick:function(){return c.push("/city/".concat(t.id))}},o?r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{className:a.media,component:"img",alt:"Weather icon",height:"140",image:"http://openweathermap.org/img/wn/".concat(o.weather[0].icon,"@2x.png"),title:"Clear Sky Icon"}),r.a.createElement(T.a,null,r.a.createElement(u.a,{gutterBottom:!0,variant:"h5",component:"h2"},t.name),r.a.createElement(C.a,{container:!0,spacing:3},r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(u.a,{className:a.temperature,variant:"h5",component:"h2"},Math.round(o.main.temp)," \xb0C"),r.a.createElement(u.a,{className:a.weatherMain,variant:"h4",component:"h3"},o.weather[0].main),r.a.createElement(u.a,{className:a.weatherDescription,variant:"h6",component:"h4"},o.weather[0].description))))):r.a.createElement(D.a,null)),r.a.createElement(I.a,null,r.a.createElement(p.a,{size:"small",variant:"contained",color:"primary",onClick:function(){return d(t)}},"Update")))}var q=Object(s.a)((function(e){return{cityList:{paddingTop:"40px"}}}));function P(){var e=q(),t=Object(y.e)(v);return r.a.createElement("div",{className:e.cityList},r.a.createElement(O.a,null),r.a.createElement(C.a,{container:!0,spacing:3},t.map((function(e){return r.a.createElement(C.a,{key:e.id,item:!0,xs:12,sm:6,md:4},r.a.createElement(_,{city:e}))}))))}var U=a(32),H=a(141),$=Object(s.a)((function(e){return{formWrapper:{padding:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"},formTitle:Object(U.a)({marginBottom:e.spacing(5),textAlign:"center"},e.breakpoints.down("sm"),{fontSize:"50px"}),submit:{marginTop:e.spacing(4),marginRight:e.spacing(4)}}}));function K(){var e=$(),t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],i=a[1],s=Object(y.d)(g),o=Object(l.a)(s,2),m=o[0],d=o[1],h=Object(y.f)(x);function f(){return(f=Object(L.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target.city.value.trim(),e.next=4,z(a);case 4:(n=e.sent)?(h(n),i("")):d({text:"City not found"});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",{className:e.formWrapper},r.a.createElement(O.a,null),r.a.createElement(u.a,{variant:"h1",className:e.formTitle},"Add your city"),r.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:function(e){return f.apply(this,arguments)}},r.a.createElement(H.a,{className:e.input,variant:"outlined",required:!0,value:c,onChange:function(e){i(e.target.value),d(null)},fullWidth:!0,id:"add-city-input",label:"City Name",type:"search",name:"city",error:!!m,helperText:m&&m.text,autoFocus:!0}),r.a.createElement(p.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Submit")))}var Q=a(142);function X(e){var t=e.list,a=Object(s.a)((function(e){return{chartTemperature:{height:"".concat(50,"px"),width:"100%",display:"flex",justifyContent:"space-between",alignItems:"flex-end"}}}))(),n=t.map((function(e){return e.main.temp})),c=Math.min.apply(Math,Object(E.a)(n)),i=Math.max.apply(Math,Object(E.a)(n));function l(e,t,a){return 100*(e-t)/(a-t)}return r.a.createElement(Q.a,{className:a.chartTemperature},t.map((function(e){var t,a=l(e.main.temp,c,i),n=((t=e.main.temp)<-50?t=-50:t>50&&(t=50),-2.7*l(t,-50,50)+270),s=.3*a*-1;return r.a.createElement(Z,{key:e.dt,temp:e.main.temp,px:s,hue:n,height:20})})))}function Z(e){var t=e.temp,a=e.px,n=e.height,c=e.hue,i=Object(s.a)((function(e){return{value:{width:"12%",textAlign:"center",height:"".concat(n,"px"),backgroundColor:"hsla(".concat(c,", 100%, 50%, .3)"),transform:"translateY(".concat(a,"px)"),display:"inline-flex",alignItems:"center"}}}))();return r.a.createElement(Q.a,{className:i.value},r.a.createElement("span",null,Math.round(t)," \xb0C"))}var ee=Object(s.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},details:{display:"flex",flexDirection:"column",flexGrow:1},content:{flexGrow:1},media:{width:151},weatherDescription:{textTransform:"capitalize"},characteristicsItem:{display:"flex"},characteristicsValue:{marginLeft:"10px",marginRight:"20px"}}}));function te(){var e=ee(),t=Object(f.h)().id,a=Object(n.useState)(null),c=Object(l.a)(a,2),i=c[0],s=c[1];function o(e){return m.apply(this,arguments)}function m(){return(m=Object(L.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t);case 2:a=e.sent,s(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){t&&Object(L.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(t);case 1:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(M.a,{className:e.root},i?r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{className:e.media,component:"img",alt:"Weather icon",height:"140",image:"http://openweathermap.org/img/wn/".concat(i.list[0].weather[0].icon,"@2x.png"),title:"Clear Sky Icon"}),r.a.createElement("div",{className:e.details},r.a.createElement(T.a,{className:e.content},r.a.createElement(u.a,{gutterBottom:!0,variant:"h2",component:"h2"},i.city.name),r.a.createElement(u.a,{className:e.temperature,variant:"h3",component:"h2"},Math.round(i.list[0].main.temp)," \xb0C"),r.a.createElement(u.a,{className:e.weatherMain,variant:"h2",component:"h3"},i.list[0].weather[0].main),r.a.createElement(u.a,{className:e.weatherDescription,variant:"h4",component:"h4"},i.list[0].weather[0].description),r.a.createElement(C.a,{container:!0,spacing:0},r.a.createElement(C.a,{item:!0,xs:12,sm:6},r.a.createElement("dl",{className:e.weatherCharacteristics},r.a.createElement("div",{className:e.characteristicsItem},r.a.createElement("dt",{className:e.characteristicsLabel},"Feels Like:"),r.a.createElement("dd",{className:e.characteristicsValue},Math.round(i.list[0].main.feels_like)," \xb0C")),r.a.createElement("div",{className:e.characteristicsItem},r.a.createElement("dt",{className:e.characteristicsLabel},"Humidity:"),r.a.createElement("dd",{className:e.characteristicsValue},Math.round(i.list[0].main.humidity)," %")),r.a.createElement("div",{className:e.characteristicsItem},r.a.createElement("dt",{className:e.characteristicsLabel},"Wind Speed:"),r.a.createElement("dd",{className:e.characteristicsValue},i.list[0].wind.speed," mps")))),r.a.createElement(C.a,{item:!0,xs:12,sm:6},r.a.createElement("dl",{className:e.weatherCharacteristics},r.a.createElement("div",{className:e.characteristicsItem},r.a.createElement("dt",{className:e.characteristicsLabel},"Min:"),r.a.createElement("dd",{className:e.characteristicsValue},Math.round(i.list[0].main.temp_min)," \xb0C"),r.a.createElement("dt",{className:e.characteristicsLabel},"Max:"),r.a.createElement("dd",{className:e.characteristicsValue},Math.round(i.list[0].main.temp_max)," \xb0C")),r.a.createElement("div",{className:e.characteristicsItem},r.a.createElement("dt",{className:e.characteristicsLabel},"Pressure:"),r.a.createElement("dd",{className:e.characteristicsValue},i.list[0].main.pressure," Pa")),r.a.createElement("div",{className:e.characteristicsItem},r.a.createElement("dt",{className:e.characteristicsLabel},"Wind Degree:"),r.a.createElement("dd",{className:e.characteristicsValue},i.list[0].wind.deg," \xb0"))))),r.a.createElement(X,{list:i.list})),r.a.createElement(I.a,null,r.a.createElement(p.a,{size:"small",variant:"contained",color:"primary",onClick:function(){return o(t)}},"Update")))):r.a.createElement(D.a,null))}var ae=a(140);var ne=function(){var e=Object(y.e)(v);return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,null),r.a.createElement(ae.a,{maxWidth:"md"},r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/"},e.length?r.a.createElement(P,null):r.a.createElement(K,null)),r.a.createElement(f.b,{path:"/city/:id"},r.a.createElement(te,null)),r.a.createElement(f.b,{path:"/add"},r.a.createElement(K,null)),r.a.createElement(f.b,{path:"*"},r.a.createElement(f.a,{to:"/"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var re=a(30);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y.a,null,r.a.createElement(re.a,null,r.a.createElement(ne,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[77,1,2]]]);
//# sourceMappingURL=main.1b723a95.chunk.js.map